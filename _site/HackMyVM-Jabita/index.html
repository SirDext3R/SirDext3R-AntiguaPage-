<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title>JABITA - HackMyVM &#8211; Al3xt0r</title> <meta name="description" content=" JABITA - HackMyVM"> <meta name="keywords" content="CTF, HackMyVM, LFI, Password Cracking"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="prof.jpeg"> <meta name="twitter:title" content="JABITA - HackMyVM"> <meta name="twitter:description" content=" JABITA - HackMyVM"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="JABITA - HackMyVM"> <meta property="og:description" content=" JABITA - HackMyVM"> <meta property="og:url" content="http://localhost:4000/HackMyVM-Jabita/"> <meta property="og:site_name" content="Al3xt0r"> <meta property="og:image" content="http://localhost:4000/images/prof.jpeg"> <link rel="canonical" href="http://localhost:4000/HackMyVM-Jabita/"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Feed --> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="" /> <!-- Favicons --> <link rel="shortcut icon" type="image/png" href="http://localhost:4000/favicon.png" /> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" /> <!-- CSS --> <link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/main.css"> <!-- Left Block Image for Posts --> <style type="text/css"> #posts.inner-post-page .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(http://localhost:4000/images/bk3.jpg) no-repeat;background-size: cover;} </style> <!-- Left Block Images for Home and Pages --> <style type="text/css"> #posts .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(http://localhost:4000/images/kg-ali.jpg) no-repeat;background-size: cover, cover;} .block-left {background: linear-gradient(rgba(44,45,51,0.9), rgba(44,45,51,0.9)), url(http://localhost:4000/images/bk2.jpeg) no-repeat;background-size: cover;} </style> </head> <body id="posts" class="inner-post-page"> <div class="block-left"> <div class="content"> <a href="http://localhost:4000" class="logo"><img src="http://localhost:4000/images/prof.jpeg"></a> <div class="post-title-section"> <div class="section-line">Posts <em>/</em></div> <h1 class="section-title">JABITA - HackMyVM </h1> <ul class="tags"> <li><a href="http://localhost:4000/tags#CTF">CTF</a></li> <li><a href="http://localhost:4000/tags#HackMyVM">HackMyVM</a></li> <li><a href="http://localhost:4000/tags#LFI">LFI</a></li> <li><a href="http://localhost:4000/tags#Password Cracking">Password Cracking</a></li> </ul> <div class="section-line reverse"><a href="http://localhost:4000/posts">Back to posts</a> <em>/</em></div> </div> </div> </div> <div class="block-right"> <div class="share-buttons"> </div> <a href="../posts.html" title="posts" class="posts-menu-icon"></a> <a title="projects" class="projects-menu-icon"> <span></span> </a> <div class="inner-post content"> <div class="date-highlight">09 Sep 2023</div> <p style="text-align: center;" class="lead"> JABITA - HackMyVM</p> <p><img src="/assets/img/HackMyVM_JABITA/logo.png" alt="" /></p> <h2 id="fase-de-reconocimiento">Fase de Reconocimiento:</h2> <p>Bueno, esta maquina viene de <a href="https://hackmyvm.eu/">HackMyVM</a>, por lo que tendremos que emularla e introducirla dentro de nuesta red local.</p> <blockquote> <p>Para ver los dispositivos en nuestro segmento de red, podremos usar multiples utilidades que vienen por defecto en nuestro sistema.</p> </blockquote> <p>En este caso usare <strong>arp-scan</strong>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>arp-scan <span class="nt">-l</span>
</code></pre></div></div> <blockquote> <blockquote> <blockquote> <p>Nota rapida, no olvidemos ejecutar este comando como sudo.</p> </blockquote> </blockquote> </blockquote> <p><img src="/assets/img/HackMyVM_JABITA/J1.png" alt="" /></p> <p>Una vez descubierta la direccion IP, procederemos al <strong>analisis de los puertos abiertos</strong>.</p> <blockquote> <p>No olvidar que para descubrir el sistema operativo mucho antes de usar herramientas como <strong>nmap</strong>, es basarnos en el TTL obtenido al lanzar un <strong>ping</strong>; el <strong>TTL comunmente de Linux</strong> es &lt;= 64</p> </blockquote> <p><img src="/assets/img/HackMyVM_JABITA/J2.png" alt="" /></p> <p>Como podemos ver, tenemos el puerto 80 y el 22 abiertos:</p> <ul> <li>El <strong>Puerto 80</strong>: Usado para el servicio HTTP.</li> <li>El <strong>Puerto 22</strong>: Usado para el servicio SSH.</li> </ul> <p>Acto seguido, vamos a ver que se encuentra tas el servicio HTTP:</p> <p><img src="/assets/img/HackMyVM_JABITA/J3.png" alt="" /></p> <p>Podemos apreciar que se trata de una web en “construccion”, pero no venimos a ver eso, venimos a <strong><del>hackear</del></strong> divertirnos, por lo que aplicaremos un <strong>directory fuzzing.</strong></p> <p><img src="/assets/img/HackMyVM_JABITA/J4.png" alt="" /></p> <p>Como podemos apreciar, hemos descubierto un directorio: <strong>building</strong></p> <p>Si vamos a este directorio podemos ver algo interesante al momento de pasar el raton sobre cualquier widget presente en la barra superior:</p> <p><img src="/assets/img/HackMyVM_JABITA/J5.png" alt="" /></p> <p>Podemos ver un posible <strong>LFI</strong>:</p> <p><img src="/assets/img/HackMyVM_JABITA/J6.png" alt="" /></p> <p>Por lo que apuntaremos a rutas que nos filtren informacion necesaria:</p> <p><img src="/assets/img/HackMyVM_JABITA/J7.png" alt="" /></p> <p>Como podemos apreciar, vemos que efectivamente existe un <strong>LFI</strong>, entonces apuntaremos a rutas claves del sistema:</p> <blockquote> <p><strong>Algunas rutas claves son:</strong> /etc/shadow, /etc/hosts, /etc/passwd… Esto debido a que en el la ruta <strong>/etc</strong> de los sistemas <strong>Linux</strong> es dond podremos encontrar mayoria de configuraciones, tanto del sistema, como dealgunas herramientas presentes.</p> </blockquote> <p><img src="/assets/img/HackMyVM_JABITA/J8.png" alt="" /></p> <p>Como podemos observar, al momento de listar el /etc/shadow, podemos encontrar las passwords de los usuarios, solo que encodeadas, por lo que tendremos que romperlas.</p> <p>Usando la herramienta John the Ripper, y valiendonos del diccionario <strong>“rockyou”</strong> obtendremos la password del usuario jack:</p> <p><img src="/assets/img/HackMyVM_JABITA/J9.png" alt="" /></p> <p>Por lo que ahora nos quedaria entrar por SSH.</p> <p><img src="/assets/img/HackMyVM_JABITA/J10.png" alt="" /></p> <p>Ahora nos queda listar binarios o permisos que nos permitan escalar nuestros privilegios para llegar al super user.</p> <p>Si buscamos permisos a nivel de sudoers, podemos toparnos con que podemos usar el comando <strong>‘awk’</strong> como el ususario <strong>jaba</strong>, por lo que pivotaremos a su shell de la siguiente forma:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> <span class="nt">-u</span> jaba /usr/bin/awk <span class="s1">'BEGIN {system("/bin/sh")}'</span>
</code></pre></div></div> <p><img src="/assets/img/HackMyVM_JABITA/J11.png" alt="" /></p> <p>Si buscamos permisos para este usuario, nos encontraremos con que podemos correr un comando en <strong>Python</strong>, asi que vamos por partes:</p> <p><img src="/assets/img/HackMyVM_JABITA/J12.png" alt="" /></p> <ul> <li>Vemos que tenemos permisos de ejecucion para un binario en lenguaje <strong>Python</strong></li> <li>El binario llama a una funcion: “wild.py”</li> <li>Procederemos a buscar la funcion y vemos que es un permiso: <strong>646</strong>, esto es interesante, puesto que nos va a permitir escribir sobre el perteneciendo al grupo de <strong>OTHERS</strong></li> </ul> <p><img src="/assets/img/HackMyVM_JABITA/J13.png" alt="" /></p> <p>Yo en este caso, dare permisos de ejecucion al binario de <strong>bash</strong>, tu puedes invocar una shell si deseas:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span><span class="p">;</span>
<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">"chmod u+s /bin/bash"</span><span class="p">)</span>
</code></pre></div></div> <p><img src="/assets/img/HackMyVM_JABITA/J14.png" alt="" /></p> <h2 id="entendiendo-la-vulnerabilidad">Entendiendo la vulnerabilidad</h2> <p>Como vimos, aprovechamos una vulnerabilidad interesante, dentro de esta maquina, al igual que en otros <strong>posts</strong> hemos tocado, esta vulnerabilidad nos permite listar ficheros interesantes del servidor:</p> <p><img src="/assets/img/HackMyVM_JABITA/J15.png" alt="" /></p> <p>La vulnerabilidad yace en el codigo <strong>php</strong>:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
  <span class="k">include</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'page'</span><span class="p">])</span>
<span class="cp">?&gt;</span>
</code></pre></div></div> <p>Eso es porque al no estar sanitizado, ya sea con una regex o similares, la funcion buscara el archivo en concreto, ya sea dentro de su directorio, o de otros… Y, por ende, es posible esta vulnerabilidad.</p> <h1 id="fin">FIN</h1> <br> <nav class="pagination"> <a href="http://localhost:4000/HTB-Forest/" class="pagination_pager" title="HTB - Forest ">previous</a> <a href="#" class="pagination_pager disabled">next</a> </nav> </div> </div> <!-- JS --> <script src="http://localhost:4000/assets/js/main.min.js"></script> <div class="overlay"> <ul class="projects-menu"> <li style="background:url(https://user-images.githubusercontent.com/86735230/184715052-062e79fd-d01b-4148-b5d2-7e64878d1f50.png) center center no-repeat;"> <a href="http://github.com/SirDext3r/JavascriptRandomizeArt" target="_blank" rel="nofollow external"> <span> Geometry Art </span> </a> </li> </ul> </div> </body> </html>
